{% extends 'loja/base.html' %}
{% load staticfiles %}

{% block content %}
    <style>
        .bg-red {
            color: red;
        {#background-color: red;#}
        }

        .bg-green {
            color: green;
        {#background-color: green;#}
        }
    </style>
    {#    {% include 'carrossel.html' %}#}
    <section class="bar background-white no-mb">
        <div class="container">
            <div class="heading text-center">
                <h2>Peça Comida Online!</h2>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">

                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                    <div class="row">
                        <div class="well well-sm text-center">
                            <div class="media">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-4">
                                        <a class="thumbnail text-center" href="#">
                                            <img class="media-object" src="{{ loja.foto }}">
                                        </a>

                                    </div>
                                    <div class="col-xs-12 col-sm-4">
                                        <div class="media-body text-center">
                                            <h4 class="media-heading">{{ loja.user.first_name }}</h4>
                                            <p><span class="label label-info">888 avaliações</span> <span
                                                    class="label label-warning">889 pedidos</span>
                                            </p>
                                            <p>
                                                {% if loja.is_online %}
                                                    <a href="#" class="btn btn-xs btn-default">
                                                        <span class="fa fa-circle bg-green"></span> Online
                                                    </a>
                                                {% else %}
                                                    <a href="#" class="btn btn-xs btn-default">
                                                        <span class="fa fa-circle bg-red"></span> Offline
                                                    </a>
                                                {% endif %}
                                                <a href="#" class="btn btn-xs btn-default"><span
                                                        class="fa fa-cutlery"></span> 35 min</a>
                                            </p>
                                            {#                                            <p class="pull-right">#}
                                            {#                                            <h2><span class="fa fa-phone"></span> {{ loja.telefone }}</h2>#}
                                            {#                                            </p>#}
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <ul class="nav nav-pills nav-fill">
                            {% for categoria in loja.categoria_set.all %}
                                <li><a href="#cat-{{ categoria.pk }}" data-toggle="tab"
                                       aria-expanded="true">{{ categoria.nome }}</a></li>
                            {% endfor %}
                        </ul>
                        <div id="myTabContent" class="tab-content">
                        <form method="post" action="{% url 'add_cart' loja.id %}">{% csrf_token %}
                             {% for cat in loja.categoria_set.all %}
                                {% if cat.produto_set.first %}
                                    <div class="tab-pane" id="cat-{{ cat.pk }}">
                                        <div class="row">
                                            {% for produto in cat.produto_set.all %}
                                                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"
                                                     style="margin-bottom: 50px;">
                                                    <a href="#p{{ produto.pk }}" data-toggle="modal"
                                                       data-target="#p{{ produto.pk }}">
                                                        <div class="thumbnail" style="height: 180px; width: 180px;">
                                                            <img title="{{ produto.nome }}"
                                                                 alt="{{ produto.nome }}"
                                                                 src="{{ produto.fotoproduto_set.first }}"
                                                                 style="height: 170px; width: 170px;"
                                                            />
                                                            <div class="caption text-center">
                                                                <h4>{{ produto.nome }}</h4>
                                                                <p>R$ {{ produto.preco_base }}</p>
                                                            </div>
                                                        </div>
                                                    </a>
                                                </div>
                                                <div class="modal fade" id="p{{ produto.pk }}" tabindex="-1"
                                                     role="dialog" aria-labelledby="exampleModalLabel"
                                                     aria-hidden="true">
                                                    <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header text-center">
                                                                <input name="produto" value="{{ produto.id }}" class="hidden"/>
                                                                <h3 class="modal-title">{{ produto.nome }}
                                                                    (R$ {{ produto.preco_base }})</h3>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                        aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="row text-center">
                                                                    <div class="col-xs-12">
                                                                        <label><b>Descricao:</b></label>
                                                                        <p class="text-center">{{ produto.descricao }}</p>
                                                                    </div>
                                                                </div>
                                                                <hr/>
                                                                {% for grupo in produto.grupo_set.all %}
                                                                    <div class="row">
                                                                        <div class="col-xs-12">
                                                                            <label><b>{{ grupo.titulo }}:</b></label>

                                                                            {% if grupo.tipo == 'radio' %}
                                                                                {% for opcional in grupo.opcional_set.all %}
                                                                                    <div class="radio">
                                                                                        <label>
                                                                                            <input type="radio" name="checks"
                                                                                                   value="{{ opcional.id }}" data-value="{{ opcional.valor }}">
                                                                                            {{ opcional.nome }}
                                                                                        </label>
                                                                                    </div>
                                                                                {% endfor %}
                                                                            {% else %}
                                                                                {% for opc in grupo.opcional_set.all %}
                                                                                    <div class="checkbox">
                                                                                        <label>
                                                                                            <input type="checkbox" name="checks"
                                                                                                   value="{{ opc.id }}">
                                                                                            {{ opc.nome }}
                                                                                        </label>
                                                                                    </div>
                                                                                {% endfor %}
                                                                            {% endif %}
                                                                        </div>

                                                                    </div>

                                                                {% endfor %}
                                                            </div>
                                                            <div class="modal-footer">
                                                                <div class="pull-left">
                                                                    <h3>R$ 8.90</h3>
                                                                </div>
                                                                <div class="pull-right">
                                                                    <button type="button" class="btn btn-secondary"
                                                                            data-dismiss="modal">Fechar
                                                                    </button>
                                                                    <button type="submit" class="btn btn-danger">Adicionar
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                {% endif %}

                            {% endfor %}
                        </form>

                        </div>
                        <br/><br/>
                        <p>Todas as imagens são meramente ilustrativas.</p>

                        <script>
                            $(document).ready(function () {
                                $('.tab-pane').first().addClass('active in');
                                $(".nav-pills>li").first().addClass('active');
                            });
                        </script>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                    <div id="order-summary" class="box mt-0 mb-4 p-0">
                        <div class="box-header mt-0">
                            <h3>Meu Pedido</h3>
                        </div>
                        <p class="text-muted">Shipping and additional costs are calculated based on the values you have
                            entered.</p>
                        <div class="table-responsive">
                            <table class="table">
                                <tbody>
                                <tr>
                                    <td>Order subtotal</td>
                                    <th>$446.00</th>
                                </tr>
                                <tr>
                                    <td>Shipping and handling</td>
                                    <th>$10.00</th>
                                </tr>
                                <tr>
                                    <td>Tax</td>
                                    <th>$0.00</th>
                                </tr>
                                <tr class="total">
                                    <td>Total</td>
                                    <th>$456.00</th>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    {% if loja.endereco_completo %}
                        <div class="box box mt-0 mb-4 p-0">
                            <div class="box-header mt-0">
                                <h4>Localização</h4>
                            </div>
                            <p class="text-muted">
                                <iframe
                                        width="355"
                                        height="350"
                                        frameborder="0" style="border:0"
                                        src="https://www.google.com/maps/embed/v1/place?key=AIzaSyD8_UGcYzrtFvXMk541STGt6Vfy9VJPcs4&q={{ loja.endereco_completo }}"
                                        allowfullscreen>
                                </iframe>


                            </p>
                            <p>{{ loja.endereco_completo }}</p>
                        </div>
                    {% endif %}
                    {% if loja.formaentrega_set.first %}
                        <div class="box box mt-0 mb-4 p-0">
                            <div class="box-header mt-0">
                                <h4>Entrega</h4>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <tbody>
                                    {% for ent in loja.formaentrega_set.all %}
                                        <tr>
                                            <td>{{ ent.forma }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    {% endif %}

                    {% if loja.formapagamento_set.first %}
                        <div class="box box mt-0 mb-4 p-0">
                            <div class="box-header mt-0">
                                <h4>Formas de Pagamento</h4>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <tbody>
                                    {% for forma in loja.formapagamento_set.all %}
                                        {% if forma.forma == 'DINHEIRO' %}
                                            <tr>
                                                <td>{{ forma.forma }}</td>
                                            </tr>
                                        {% else %}
                                            <tr>
                                                <td>{{ forma.forma }} - {{ forma.cartao }}</td>
                                            </tr>
                                        {% endif %}
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    {% endif %}

                </div>
            </div>
        </div>
    </section>


    <script type="text/javascript">
        $(document).ready(function () {
            $('#inicio').addClass('active');
        });
    </script>

{% endblock %}